webpackJsonp([19,25],{41:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getWXlogin=t.getQRAuthCode=t.getAddress=t.getUserBind=t.updateUserInfo=t.oldNewTrans=t.qrcodeLogin=t.confirmCode=t.userForget=t.userLogin=t.getVcCode=t.userRegistry=void 0;var n=a(75),r=o(n);t.userRegistry=function(e){var t="/v1/auth/createRegister";return(0,r.default)(e,t)},t.getVcCode=function(e){var t="/v1/auth/obtainCode";return(0,r.default)(e,t)},t.userLogin=function(e){var t="/v1/auth/userLogin";return(0,r.default)(e,t)},t.userForget=function(e){var t="/v1/auth/resetPassword";return(0,r.default)(e,t)},t.confirmCode=function(e){var t="/v1/auth/confirmCode";return(0,r.default)(e,t)},t.qrcodeLogin=function(e){var t="/v1/web/login";return(0,r.default)(e,t)},t.oldNewTrans=function(e){var t="/v1/public/revisePaw";return(0,r.default)(e,t)},t.updateUserInfo=function(e){var t="/v1/public/updateUser";return(0,r.default)(e,t)},t.getUserBind=function(e){var t="/v1/public/userBinding";return(0,r.default)(e,t)},t.getAddress=function(e){var t="/v1/public/getAddress";return(0,r.default)(e,t)},t.getQRAuthCode=function(e){var t="/v1/auth/getQRAuthCode";return(0,r.default)(e,t)},t.getWXlogin=function(e){var t="/v1/auth/qrLogin";return(0,r.default)(e,t)}},1447:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(41);t.default={data:function(){return{experienceInfo:{phoneNumber:"",SMSCode:""},sended:!1,subsub:60,loading:!0,unbound:!0}},methods:{userlogin:function(){var e=this,t={userId:"",key:"",operateType:"4"};(0,o.userLogin)(t).then(function(t){200===t.data.state?(sessionStorage.setItem("companyId",t.data.data.companyId),sessionStorage.setItem("sig",t.data.data.sig),sessionStorage.setItem("nickname",t.data.data.userName),sessionStorage.setItem("tokenId",t.data.data.tokenId),t.data.data.Id?sessionStorage.setItem("id",t.data.data.Id):t.data.data.userId&&sessionStorage.setItem("id",t.data.data.userId),e.$router.push("/mainIndex")):e.$store.dispatch("workPopupError",t.data.msg)})},loadWXQRcode:function(){var e=this,t=this.serializeUrl(location.href).param;(0,o.getWXlogin)({code:t.code,state:t.state}).then(function(t){console.log(t),100==t.data.state?console.log("已经绑定"):1001033==t.data.state?e.loading=e.unbound=!1:99==t.data.state?(e.loading=!1,e.$store.dispatch("workPopupError",t.data.msg)):200==t.data.state&&(e.loading=!1,40029==t.data.data.errcode||40163==t.data.data.errcode?e.$store.dispatch("workPopupError",t.data.data.errmsg):t.data.data.companyId?t.data.data.Id&&(t.data.data.Id?sessionStorage.setItem("id",t.data.data.Id):t.data.data.userId&&sessionStorage.setItem("id",t.data.data.userId),sessionStorage.setItem("companyId",t.data.data.companyId),sessionStorage.setItem("sig",t.data.data.sig),sessionStorage.setItem("nickname",t.data.data.userName),sessionStorage.setItem("tokenId",t.data.data.tokenId),e.$router.push("/mainIndex")):e.$router.push({path:"/member/login",query:{isCompany:"N"}}))})},handleRegIconClick:function(){var e=this,t={phone:this.experienceInfo.phoneNumber,type:"04"};if(/^1[34578]\d{9}$/.test(t.phone)){var a=this;(0,o.getVcCode)(t).then(function(t){console.log(t.data),200===t.data.state?(a.sended=!0,window.intersubsub=setInterval(function(){--a.subsub,a.subsub<=0&&(clearInterval(window.intersubsub),a.sended=!1,a.subsub=60)},1e3)):e.$store.dispatch("workPopupError",t.data.msg)})}else this.$store.dispatch("workPopupError","请正确输入有效手机号.")},ajaxExperienceLogin:function(){var e=this;if(this.experienceInfo.SMSCode.length<4||this.experienceInfo.SMSCode.length>=5)return void this.$store.dispatch("workPopupError","请正确输入验证码");var t={phone:this.experienceInfo.phoneNumber,SMSCode:this.experienceInfo.SMSCode,type:"1",otherId:this.serializeUrl(location.href).param.state};(0,o.getUserBind)(t).then(function(t){200==t.data.state?(clearInterval(window.intersubsub),e.sended=!1,e.subsub=60,sessionStorage.setItem("id",t.data.data.userId),sessionStorage.setItem("companyId",t.data.data.companyId),sessionStorage.setItem("sig",t.data.data.sig),sessionStorage.setItem("nickname",t.data.data.userName),sessionStorage.setItem("tokenId",t.data.data.tokenId),sessionStorage.setItem("userId",t.data.data.userId),t.data.data.companyId?e.$router.push("/mainIndex"):e.$router.push({path:"/member/login",query:{isCompany:"N"}})):e.$store.dispatch("workPopupError",t.data.msg)},function(t){e.$store.dispatch("workPopupError","验证短信码失败")})},serializeUrl:function(e){function t(){var e=this,t=[],a=[],o=[];t.push(e.protocol,e.protocol&&"//"||"",e.host,e.port,e.path,e.file);for(var n in e.param)a.push(n+"="+e.param[n]);for(var n in e.hash)o.push(n+"="+e.hash[n]);return t.push(a.length&&"?"+a.join("&")||""),e.anchor?t.push(e.anchor):t.push(o.length&&"#"+o.join("&")||""),t.join("")}var a,o={},n={},r=e||location.href,i=/([^?]*)([^#]*)(.*)/.exec(r),s=/^(http|ftp)/.test(i[1])?/(.*?:)?(?:\/?\/?)([\.\w]*)(:\d*)?(.*?)([^\/]*)$/.exec(i[1]):/(.*?)([^\/]*)$/.exec(i[1]),d=i[2].match(/[^?&=]*=[^?&=]*/g),u=i[3].match(/[^#&=]*=[^#&=]*/g);if(d)for(var p=0,c=d.length;p<c;p++){var l=/([^=]*)(?:=*)(.*)/.exec(d[p]);o[l[1]]=l[2]}if(u)for(var p=0,c=u.length;p<c;p++){var g=/([^=]*)(?:=*)(.*)/.exec(u[p]);n[g[1]]=g[2]}return i[3]&&!/[=&]/g.test(i[3])&&(a=i[3]),!/^(http|ftp)/.test(i[1])&&s.splice(1,0,void 0,void 0,void 0),{href:i[0],protocol:s[1],host:s[2],port:s[3]||"",path:s[4],file:s[5],param:o,hash:n,anchor:a,getUrl:t}}},mounted:function(){var e=this;this.$nextTick(function(){e.loadWXQRcode()})}}},1936:function(e,t,a){t=e.exports=a(4)(),t.push([e.id,".ex-wrap[data-v-74b576b1]{width:350px;background:#fff;margin:0 auto;position:relative}.ex-wrap .main[data-v-74b576b1]{overflow:hidden}.ex-wrap .main .main-item[data-v-74b576b1]{margin-bottom:20px;position:relative}.ex-wrap .main .main-item input[data-v-74b576b1]{width:100%;height:40px;border:1px solid #d6d6d6;border-radius:4px;padding-left:15px;font-size:14px}.ex-wrap .main .main-item .barcode[data-v-74b576b1]{padding-right:130px}.ex-wrap .main .main-item span[data-v-74b576b1]{height:25px;padding:0 18px;display:block;color:#2993f8;font-size:14px;line-height:25px;position:absolute;right:0;top:7px;cursor:pointer}.ex-wrap .main .main-item .isSend[data-v-74b576b1]{position:absolute;border:0 none;right:2px;top:3px;cursor:default;color:#2993f8}.ex-wrap .main .btn[data-v-74b576b1]{width:100%;height:40px;background:#2993f8;color:#fff;font-size:16px;line-height:40px;border-radius:4px;cursor:pointer;margin-bottom:20px;margin-top:35px;display:inline-table;text-align:center}.ex-wrap .main p[data-v-74b576b1]{text-align:center;color:#999;font-size:12px}.register[data-v-74b576b1]{width:450px;margin:50px auto;background-color:#fff;box-shadow:0 0 15px #ddd;border-radius:10px}.login[data-v-74b576b1]{margin-bottom:20px}.login>h5[data-v-74b576b1]{height:87px;padding-top:35px;line-height:30px;font-weight:700;font-size:20px;text-align:center;color:#2993f8;position:relative}.loading[data-v-74b576b1]{min-height:500px;height:100%;width:100%}.about[data-v-74b576b1]{height:50px;border-top:1px solid #e9e9e9;line-height:50px;font-size:13px;padding:0 50px;display:-ms-flexbox;display:flex}.about>a[data-v-74b576b1]{width:33.33%;text-align:center}.wxQRcode-container[data-v-74b576b1]{float:left;width:100%;padding-top:10px;padding-bottom:20px}.wxQRcode-container>.wxQcode[data-v-74b576b1]{height:150px;width:150px;margin:0 auto}.wxQRcode-container>.wxQcode>img[data-v-74b576b1]{width:100%;height:100%}.wxQRcode-container>p[data-v-74b576b1]{height:35px;line-height:35px}",""])},2742:function(e,t,a){var o=a(1936);"string"==typeof o&&(o=[[e.id,o,""]]);a(5)(o,{});o.locals&&(e.exports=o.locals)},3118:function(e,t,a){e.exports=a.p+"static/img/qrcode.ee79102.jpg"},3541:function(e,t,a){a(2742);var o=a(1)(a(1447),a(3961),"data-v-74b576b1",null);e.exports=o.exports},3961:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.unbound?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"loading",attrs:{"element-loading-text":"页面加载中..."}}):a("div",{staticClass:"register"},[e._m(0),e._v(" "),a("div",{staticClass:"ex-wrap"},[a("div",{staticClass:"main"},[a("div",{staticClass:"main-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.experienceInfo.phoneNumber,expression:"experienceInfo.phoneNumber"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:e.experienceInfo.phoneNumber},on:{input:function(t){t.target.composing||(e.experienceInfo.phoneNumber=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"main-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.experienceInfo.SMSCode,expression:"experienceInfo.SMSCode"}],staticClass:"barcode",attrs:{type:"text",placeholder:"验证码"},domProps:{value:e.experienceInfo.SMSCode},on:{input:function(t){t.target.composing||(e.experienceInfo.SMSCode=t.target.value)}}}),e._v(" "),e.sended?a("el-button",{staticClass:"isSend",attrs:{slot:"append"},slot:"append"},[e._v("已发送("+e._s(e.subsub<10?"0"+e.subsub:e.subsub)+"s)")]):a("span",{on:{click:e.handleRegIconClick,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13)?void e.ajaxExperienceLogin(t):null}}},[e._v("发送验证码")])],1),e._v(" "),a("div",{staticClass:"btn",on:{click:e.ajaxExperienceLogin}},[e._v("确定")]),e._v(" "),e._m(1)])]),e._v(" "),a("div",{staticClass:"about"},[a("router-link",{attrs:{to:"#"}},[e._v("关于云珠宝")]),e._v(" "),a("router-link",{attrs:{to:"#"}},[e._v("隐私协议")]),e._v(" "),a("router-link",{attrs:{to:"#"}},[e._v("服务条款")])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("h5",[e._v("绑定登录手机号")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wxQRcode-container"},[o("div",{staticClass:"wxQcode"},[o("img",{attrs:{src:a(3118),alt:""}})]),e._v(" "),o("p",[e._v("扫一扫关注智慧展厅")])])}]}}});