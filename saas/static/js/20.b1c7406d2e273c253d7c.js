webpackJsonp([20,25],{41:function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getWXlogin=t.getQRAuthCode=t.getAddress=t.getUserBind=t.updateUserInfo=t.oldNewTrans=t.qrcodeLogin=t.confirmCode=t.userForget=t.userLogin=t.getVcCode=t.userRegistry=void 0;var n=s(75),r=o(n);t.userRegistry=function(e){var t="/v1/auth/createRegister";return(0,r.default)(e,t)},t.getVcCode=function(e){var t="/v1/auth/obtainCode";return(0,r.default)(e,t)},t.userLogin=function(e){var t="/v1/auth/userLogin";return(0,r.default)(e,t)},t.userForget=function(e){var t="/v1/auth/resetPassword";return(0,r.default)(e,t)},t.confirmCode=function(e){var t="/v1/auth/confirmCode";return(0,r.default)(e,t)},t.qrcodeLogin=function(e){var t="/v1/web/login";return(0,r.default)(e,t)},t.oldNewTrans=function(e){var t="/v1/public/revisePaw";return(0,r.default)(e,t)},t.updateUserInfo=function(e){var t="/v1/public/updateUser";return(0,r.default)(e,t)},t.getUserBind=function(e){var t="/v1/public/userBinding";return(0,r.default)(e,t)},t.getAddress=function(e){var t="/v1/public/getAddress";return(0,r.default)(e,t)},t.getQRAuthCode=function(e){var t="/v1/auth/getQRAuthCode";return(0,r.default)(e,t)},t.getWXlogin=function(e){var t="/v1/auth/qrLogin";return(0,r.default)(e,t)}},1066:function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(11),r=o(n),a=s(10),i=s(41);t.default={data:function(){return{userNewInfo:{oldPasswd:"",newPasswd:"",SMSCode:""},uploadData:{},forgetPW:!1,sended:!1,subsub:60,oldInfo:!1,titleInfo:"",SMSInfo:"",dialogVisible:!1,isDelSure:!1}},computed:(0,r.default)({},(0,a.mapGetters)(["userInfo"])),methods:{handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},forgetPasswd:function(){this.forgetPW=!0},blurAction:function(e){if(1==e){if(""===this.userNewInfo.oldPasswd||this.userNewInfo.oldPasswd.length<6||this.userNewInfo.oldPasswd.length>32)return this.oldInfo=!0,void(this.titleInfo="原始密码长度为6-32个字符");this.titleInfo=" "}else if(2==e){if(""===this.userNewInfo.newPasswd||this.userNewInfo.newPasswd.length<6||this.userNewInfo.newPasswd.length>32)return this.oldInfo=!0,void(this.titleInfo="新密码长度必须为6-32个字符");if(this.userNewInfo.oldPasswd===this.userNewInfo.newPasswd)return this.oldInfo=!0,void(this.titleInfo="新旧密码一样");this.titleInfo=" "}},submitUpdatePasswd:function(){var e=this,t=this;if(this.forgetPW){var s={phone:t.userInfo.phone,SMSCode:t.userNewInfo.SMSCode,type:"02"};if(s.SMSCode<1e3||s.SMSCode>=1e4)return void this.$store.dispatch("workPopupError","请正确输入验证码");(0,i.confirmCode)(s).then(function(s){if(200===s.data.state){var o={phone:t.userInfo.phone,password:md5(t.userNewInfo.newPasswd)};if(""===t.userNewInfo.newPasswd||t.userNewInfo.newPasswd.length<6||t.userNewInfo.newPasswd.length>32)return;(0,i.userForget)(o).then(function(t){if(200===t.data.state){e.$store.dispatch("workPopupError","密码修改成功");var s=e;e.isDelSure=val1,1==e.isDelSure&&s.$router.push("/work/")}else e.$store.dispatch("workPopupError",t.data.msg)})}else e.$store.dispatch("workPopupError","无效验证码")})}else{var o={oldPassword:md5(this.userNewInfo.oldPasswd),newPassword:md5(this.userNewInfo.newPasswd)};if(""===this.userNewInfo.newPasswd||this.userNewInfo.newPasswd.length<6||this.userNewInfo.newPasswd.length>32)return this.oldInfo=!0,void(this.titleInfo="密码长度为6-32个字符");if(this.userNewInfo.oldPasswd===this.userNewInfo.newPasswd)return this.oldInfo=!0,void(this.titleInfo="新旧密码一样");(0,i.oldNewTrans)(o).then(function(s){console.log(s.data),1001069===s.data.state?(e.oldInfo=!0,e.titleInfo="请输入正确的原密码",t.userNewInfo.oldPasswd=""):200===s.data.state&&(e.$store.dispatch("workPopupError","密码修改成功"),t.$router.push({path:"/admin/personalInfo",params:{navNum:0},query:{navNum:0}})),e.oldInfo=!1,t.userNewInfo.newPasswd="",t.userNewInfo.oldPasswd=""},function(t){e.$store.dispatch("workPopupError","密码修改失败")})}},getSMSCode:function(){var e=this,t=this,s={phone:this.userInfo.phone,type:"03"};(0,i.getVcCode)(s).then(function(s){200===s.data.state?(t.sended=!0,t.intersubsub=setInterval(function(){--t.subsub,t.subsub<=0&&(clearInterval(t.intersubsub),t.sended=!1,t.subsub=60)},1e3)):e.$store.dispatch("workPopupError",s.data.msg)}),this.userNewInfo.SMSCode="",console.log(this.userInfo.phone.length),this.SMSInfo="验证码已发送到"+this.userInfo.phone+"的手机上"}},mounted:function(){var e=this;eventBus.$on("passwordPage",function(t){e.forgetPW=t})}}},1975:function(e,t,s){t=e.exports=s(4)(),t.push([e.id,".titleInfo[data-v-e4eb0e80]{position:absolute;bottom:-16px;left:30px;color:red;font-size:12px}.SMSCodeTitle[data-v-e4eb0e80]{position:absolute;bottom:-16px;left:30px;color:#666;font-size:12px}.reset_passwd[data-v-e4eb0e80]{width:100%;position:relative}.reset_passwd .reset_passwd_panel[data-v-e4eb0e80]{position:absolute;width:75%;top:0;left:0;margin-left:70px;background-color:#f6f7f8;border-radius:15px;padding-top:50px}.reset_passwd .reset_passwd_panel .input_item[data-v-e4eb0e80]{width:70%;height:50px;margin:5px 0;color:#666}.reset_passwd .reset_passwd_panel .input_item span[data-v-e4eb0e80]{display:inline-block}.reset_passwd .reset_passwd_panel .input_item span[data-v-e4eb0e80]:first-child{width:30%;padding:0 20px 0 40px;text-align:left}.reset_passwd .reset_passwd_panel .input_item span[data-v-e4eb0e80]:last-child{width:70%}.reset_passwd .reset_passwd_panel .input_item span:last-child input[data-v-e4eb0e80]{width:100%;font-size:16px;height:36px;line-height:36px;padding-left:10px;color:#999;border:1px solid #ccc;border-radius:3px}.reset_passwd .reset_passwd_panel .input_item span:last-child input[data-v-e4eb0e80]:focus{border:1px solid #4fdcca;color:#4fdcca}.reset_passwd .reset_passwd_panel .submitBtn[data-v-e4eb0e80]{width:150px;height:40px;line-height:40px;background-color:#fa3;color:#fff;text-align:center;border-radius:3px;margin:20px 0 50px 40px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}",""])},2906:function(e,t,s){var o=s(1975);"string"==typeof o&&(o=[[e.id,o,""]]);s(5)(o,{});o.locals&&(e.exports=o.locals)},3212:function(e,t,s){s(2906);var o=s(1)(s(1066),s(4103),"data-v-e4eb0e80",null);e.exports=o.exports},4103:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reset_passwd"},[e.forgetPW?s("div",{staticClass:"reset_passwd_panel"},[s("div",{staticClass:"input_item"},[s("span",[e._v("验证码")]),s("span",{staticStyle:{position:"relative"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userNewInfo.SMSCode,expression:"userNewInfo.SMSCode"}],attrs:{type:"text"},domProps:{value:e.userNewInfo.SMSCode},on:{input:function(t){t.target.composing||(e.userNewInfo.SMSCode=t.target.value)}}}),s("span",{staticClass:"SMSCodeTitle"},[e._v(e._s(e.SMSInfo))]),e._v(" "),e.sended?s("span",{staticStyle:{position:"absolute",bottom:"0",right:"-80%",color:"#4fdcca","margin-bottom":"9px",cursor:"pointer","user-select":"none"}},[e._v(e._s(e.subsub<10?"0"+e.subsub:e.subsub)+"后再获取")]):s("span",{staticStyle:{position:"absolute",bottom:"0",right:"-80%",color:"#4fdcca","margin-bottom":"9px",cursor:"pointer","user-select":"none"},on:{click:e.getSMSCode}},[e._v("获取验证码")])])]),e._v(" "),s("div",{staticClass:"input_item"},[s("span",[e._v("新密码")]),s("span",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userNewInfo.newPasswd,expression:"userNewInfo.newPasswd"}],attrs:{type:"password"},domProps:{value:e.userNewInfo.newPasswd},on:{input:function(t){t.target.composing||(e.userNewInfo.newPasswd=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"submitBtn",on:{click:e.submitUpdatePasswd}},[e._v("\n      提交修改\n    ")])]):s("div",{staticClass:"reset_passwd_panel"},[s("div",{staticClass:"input_item"},[s("span",[e._v("原密码")]),s("span",{staticStyle:{position:"relative"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userNewInfo.oldPasswd,expression:"userNewInfo.oldPasswd"}],attrs:{type:"password",placeholder:""},domProps:{value:e.userNewInfo.oldPasswd},on:{blur:function(t){e.blurAction(1)},input:function(t){t.target.composing||(e.userNewInfo.oldPasswd=t.target.value)}}}),e.oldInfo?s("p",{staticClass:"titleInfo"},[e._v(e._s(e.titleInfo))]):e._e(),s("span",{staticStyle:{position:"absolute",bottom:"0",right:"-80%",color:"#4fdcca","margin-bottom":"9px",cursor:"pointer","user-select":"none"},on:{click:e.forgetPasswd}},[e._v("忘记密码?")])])]),e._v(" "),s("div",{staticClass:"input_item"},[s("span",[e._v("新密码")]),s("span",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userNewInfo.newPasswd,expression:"userNewInfo.newPasswd"}],attrs:{type:"password",placeholder:""},domProps:{value:e.userNewInfo.newPasswd},on:{blur:function(t){e.blurAction(2)},input:function(t){t.target.composing||(e.userNewInfo.newPasswd=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"submitBtn",on:{click:e.submitUpdatePasswd}},[e._v("\n      提交修改\n    ")])])])},staticRenderFns:[]}}});