webpackJsonp([11,25],{41:function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getWXlogin=t.getQRAuthCode=t.getAddress=t.getUserBind=t.updateUserInfo=t.oldNewTrans=t.qrcodeLogin=t.confirmCode=t.userForget=t.userLogin=t.getVcCode=t.userRegistry=void 0;var n=s(75),a=o(n);t.userRegistry=function(e){var t="/v1/auth/createRegister";return(0,a.default)(e,t)},t.getVcCode=function(e){var t="/v1/auth/obtainCode";return(0,a.default)(e,t)},t.userLogin=function(e){var t="/v1/auth/userLogin";return(0,a.default)(e,t)},t.userForget=function(e){var t="/v1/auth/resetPassword";return(0,a.default)(e,t)},t.confirmCode=function(e){var t="/v1/auth/confirmCode";return(0,a.default)(e,t)},t.qrcodeLogin=function(e){var t="/v1/web/login";return(0,a.default)(e,t)},t.oldNewTrans=function(e){var t="/v1/public/revisePaw";return(0,a.default)(e,t)},t.updateUserInfo=function(e){var t="/v1/public/updateUser";return(0,a.default)(e,t)},t.getUserBind=function(e){var t="/v1/public/userBinding";return(0,a.default)(e,t)},t.getAddress=function(e){var t="/v1/public/getAddress";return(0,a.default)(e,t)},t.getQRAuthCode=function(e){var t="/v1/auth/getQRAuthCode";return(0,a.default)(e,t)},t.getWXlogin=function(e){var t="/v1/auth/qrLogin";return(0,a.default)(e,t)}},336:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{showDropdownIndex:null,clickType1:"p1",clickType2:"c2",clickType3:"a3"}},props:["pList","cList","aList","seltP","seltC","seltA"],created:function(){},methods:{selectP:function(){console.log(this.showDropdownIndex),this.showDropdownIndex=0},selectC:function(){this.showDropdownIndex=1},selectA:function(){this.showDropdownIndex=2},selectedP:function(e){},selectedC:function(e){},selectedA:function(e){},clickTap:function(e,t){console.log(t.target.innerHTML),console.log(t.target.id),console.log(e),"p1"==e?this.$emit("selectedP",t.target.innerHTML,t.target.id):"c2"==e?this.$emit("selectedC",t.target.innerHTML,t.target.id):"a3"==e&&this.$emit("selectedA",t.target.innerHTML,t.target.id),this.showDropdownIndex=null}}}},337:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},props:["useType","userInfo","companyInfo","shopInfo","logo"],computed:{currSrc:function(){return this.logo?this.logo:"更换头像"===this.useType?this.currHeadSrc:this.currLogoSrc},currHeadSrc:function(){return this.userInfo.userLogo?this.userInfo.userLogo:"static/img/userphone.png"},currLogoSrc:function(){return this.companyInfo.logo?this.companyInfo.logo:"static/img/userphone.png"}},created:function(){},methods:{selectFile:function(){document.getElementById("file_input").click()},changeFileInput:function(e){var t=e.target.files[0];if(t){this.$emit("up",t);var s=new FileReader;s.readAsDataURL(e.target.files[0]),s.onload=function(e){document.getElementById("preview_img").src=this.result}}}}}},396:function(e,t,s){t=e.exports=s(4)(),t.push([e.id,".pca_select[data-v-29376713]{width:100%;height:100%;font-size:20px}.pca_select .selectbox[data-v-29376713]{width:28%;display:inline-block;max-width:28%;font-size:13px;color:#999;text-align:center;position:relative;text-overflow:ellipsis;white-space:nowrap;background:#fff url("+s(472)+") 90% no-repeat;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.pca_select .selectbox .dropdownbox[data-v-29376713]{display:none;position:absolute;bottom:12px;left:0;width:130%;height:175px;color:#666;margin-bottom:-175px;margin-left:-15%;background-color:#fff;border:1px solid #d6d6d6;box-shadow:5px 5px 5px rgba(0,0,0,.3);overflow:scroll}.pca_select .selectbox .dropdownbox.active[data-v-29376713]{display:block;z-index:101}.pca_select .selectbox .dropdownbox .option[data-v-29376713]{width:100%;height:20px;line-height:20px;font-size:12px;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:center}.pca_select .selectbox .dropdownbox .option[data-v-29376713]:hover{background-color:#4fdcca;color:#fff}",""])},398:function(e,t,s){t=e.exports=s(4)(),t.push([e.id,".select_preview[data-v-59e86430]{width:100%;text-align:center}.select_preview .preview[data-v-59e86430]{margin:0 auto}.select_preview .preview img[data-v-59e86430]{width:116px;height:116px;border-radius:50%}.select_preview .button[data-v-59e86430]{width:130px;height:36px;line-height:36px;font-size:16px;background-color:#83bbf7;font-family:MicrosoftYaHei-Bold;color:#fff;font-weight:700;border-radius:4px;margin:0 auto;margin-top:20px;cursor:pointer}.select_preview .display-none[data-v-59e86430]{display:none}",""])},431:function(e,t,s){var o=s(396);"string"==typeof o&&(o=[[e.id,o,""]]);s(5)(o,{});o.locals&&(e.exports=o.locals)},433:function(e,t,s){var o=s(398);"string"==typeof o&&(o=[[e.id,o,""]]);s(5)(o,{});o.locals&&(e.exports=o.locals)},472:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Qjg0Q0I1NzMzRTIwMTFFNzk0Q0FEQzE5NTdBOEFERTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Qjg0Q0I1NzQzRTIwMTFFNzk0Q0FEQzE5NTdBOEFERTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCODRDQjU3MTNFMjAxMUU3OTRDQURDMTk1N0E4QURFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCODRDQjU3MjNFMjAxMUU3OTRDQURDMTk1N0E4QURFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrPFRpkAAABESURBVHjaYjQ2Np7NwMCQwoAdzGECEtlAfByLJEgsG6TgFxCHAPEzJMlnULFfTEgCwVDFKBpYkHSdAOIsIGZEthIgwAC82g9tWY8+zAAAAABJRU5ErkJggg=="},498:function(e,t,s){s(431);var o=s(1)(s(336),s(520),"data-v-29376713",null);e.exports=o.exports},499:function(e,t,s){s(433);var o=s(1)(s(337),s(523),"data-v-59e86430",null);e.exports=o.exports},520:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"pca_select"},[s("span",{staticClass:"selectbox",on:{click:e.selectP}},[e._v(e._s(e.seltP?e.seltP:"省")),s("ul",{staticClass:"dropdownbox",class:{active:0===e.showDropdownIndex},on:{click:function(t){t.stopPropagation(),e.selectedP(t)}}},e._l(e.pList,function(t,o){return s("li",{staticClass:"option",attrs:{id:t.objectId},on:{click:function(t){t.preventDefault(),e.clickTap(e.clickType1,t)}}},[e._v(e._s(t.objectName))])}))]),e._v(" "),s("span",{staticClass:"selectbox",on:{click:e.selectC}},[e._v(e._s(e.seltC?e.seltC:"市")),s("ul",{staticClass:"dropdownbox",class:{active:1===e.showDropdownIndex},on:{click:function(t){t.stopPropagation(),e.selectedC(t)}}},e._l(e.cList,function(t,o){return s("li",{staticClass:"option",attrs:{id:t.objectId},on:{click:function(t){t.preventDefault(),e.clickTap(e.clickType2,t)}}},[e._v(e._s(t.objectName))])}))]),e._v(" "),s("span",{staticClass:"selectbox",on:{click:e.selectA}},[e._v(e._s(e.seltA?e.seltA:"区")),s("ul",{staticClass:"dropdownbox",class:{active:2===e.showDropdownIndex},on:{click:function(t){t.stopPropagation(),e.selectedA(t)}}},e._l(e.aList,function(t,o){return s("li",{staticClass:"option",attrs:{id:t.objectId},on:{click:function(t){t.preventDefault(),e.clickTap(e.clickType3,t)}}},[e._v(e._s(t.objectName))])}))])])},staticRenderFns:[]}},523:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"select_preview"},[s("div",{staticClass:"preview"},[s("img",{attrs:{src:e.currSrc,id:"preview_img"},on:{click:e.selectFile}})]),e._v(" "),s("div",{staticClass:"button",staticStyle:{display:"none"}},[e._v(e._s(e.useType))]),e._v(" "),s("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file_input"},on:{change:e.changeFileInput}})])},staticRenderFns:[]}},1067:function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(11),a=o(n),i=s(10),r=s(499),c=o(r),l=s(498),d=o(l),u=s(117),p=o(u),f=s(92),g=o(f),h=s(41),v=s(347);t.default={name:"PersonalInfo",data:function(){return{operateType:null,sexCheck:0,personalInfo:{},companyInfo:{logoSrc:"static/img/userphone.png"},pList:[],cList:[],aList:[],seltP:"",seltC:"",seltA:"",seltPup:"",seltCup:"",seltAup:"",dropBox:null,flag:!1,navNum:0}},directives:{focus:{inserted:function(e){e.focus()}}},computed:(0,a.default)({},(0,i.mapGetters)(["userInfo"]),{userSexTrans:function(){return 3===this.userInfo.sex?"未设置":1===this.userInfo.sex?"男":"女"}}),components:{SelectImagePreview:c.default,PcaSelect:d.default},watch:{$route:"routeAct"},methods:{routeAct:function(){this.operateType=null},toEditing:function(e){this.operateType=e,this.flag=!0},manCheck:function(){var e=this;this.sexCheck=1;var t={operateType:this.operateType,objectData:this.sexCheck};this.personalInfo.sex=1,(0,h.updateUserInfo)(t).then(function(t){console.log(t.data),200===t.data.state&&(console.log("update user sex success"),e.operateType=0,e.$store.dispatch("getUserInfo"),console.log(1111))},500)},womanCheck:function(){var e=this;this.sexCheck=2;var t={operateType:this.operateType,objectData:this.sexCheck};this.personalInfo.sex=2,(0,h.updateUserInfo)(t).then(function(t){console.log(t.data),200===t.data.state&&(console.log("update user sex success"),e.operateType=0,e.$store.dispatch("getUserInfo"),console.log(2222))})},blurAndUplaod:function(e){if(3!==this.operateType||/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/.test(this.userInfo.email)||""==this.userInfo.email){var t={operateType:this.operateType,objectData:e.target.value};(0,h.updateUserInfo)(t).then(function(e){console.log(e.data),200===e.data.state&&console.log("update user info success")}),this.operateType=0}else this.$message({message:"邮箱格式必须为XXX@XX.com/cn ...",type:"warning"})},updateUserArea:function(){var e=this,t={operateType:this.operateType,objectData:this.seltPup+"-"+this.seltCup+"-"+this.seltAup};console.log(t),(0,h.updateUserInfo)(t).then(function(e){console.log(t.objectData),console.log(e.data),200===e.data.state&&console.log("update area success")}),this.operateType=0,(0,h.getAddress)({type:"1"}).then(function(t){200===t.data.state&&(console.log(t.data),e.pList=t.data.data.dataList)}),this.$store.dispatch("getUserInfo")},selectedP:function(e,t){var s=this;this.seltP=e,this.seltPup=t,this.cList=[],this.aList=[],this.seltC="",this.seltA="",(0,h.getAddress)({type:"2",objectId:t}).then(function(e){200===e.data.state&&(console.log(e),s.cList=e.data.data.dataList)})},selectedC:function(e,t){var s=this;this.seltC=e,this.seltCup=t,this.seltA="",(0,h.getAddress)({type:"3",objectId:t}).then(function(e){200===e.data.state&&(s.aList=e.data.data.dataList)})},selectedA:function(e,t){this.seltA=e,this.seltAup=t,this.updateUserArea()},uploadHandler:function(e){var t=this,s=e.name.split("."),o=s[s.length-1],n=p.default.Cos.getSignUrl,a=p.default.Cos.updateUploadFileURL,i="/iconHeaded/",r=p.default.Cos.appid,c=p.default.Cos.bucket,l=p.default.Cos.region,d=sessionStorage.getItem("id"),u=(new Date).getTime(),f=d+"-"+u+"."+o,h=new CosCloud({appid:r,bucket:c,region:l,getAppSign:function(e){g.default.apiCall({type:"1"},n).then(function(t){var s=t.data.data.signStr;console.log(s),i=t.data.data.url,e(s)})}});if("png"!=o&&"jpg"!=o)return this.$store.dispatch("workPopupError","文件格式必须为 *.jpg / *.png"),void location.reload();var v=function(e){if(0===e.code){var s={type:"1",objId:d,url:e.data.source_url};g.default.apiCall(s,a).then(function(e){console.log(e.data),200===e.data.state&&(console.log("updateUploadFileURL success response"),t.$store.dispatch("getUserInfo"))})}},_=function(e){console.log(e)},m=function(e){console.log(e)};h.uploadFile(v,_,m,c,i+f,e,1)}},created:function(){this.operateType=null;var e=this;4==this.operateType&&(console.log(111111111),eventBus.$on("PscDropBox",function(t){e.operateType=t,console.log(e.operateType)}))},mounted:function(){var e=this,t={userId:sessionStorage.getItem("id")};(0,v.getSelfInfo)(t).then(function(e){console.log(e.data)}),console.log(this.$store),(0,h.getAddress)({type:"1"}).then(function(t){200===t.data.state&&(console.log(t.data),e.pList=t.data.data.dataList)}),this.$store.dispatch("getUserInfo")}}},1925:function(e,t,s){t=e.exports=s(4)(),t.push([e.id,".sex-sel[data-v-71050a30]{width:14px!important;height:14px!important;margin-right:5px}.sex-sel[data-v-71050a30]:nth-child(2){margin-left:30px}.user_info[data-v-71050a30]{width:100%;clear:both}.user_info .uf_main_left[data-v-71050a30]{width:65%;float:left}.user_info .uf_main_left .uf_main_left_code[data-v-71050a30]{background-color:#f6f7f8;border-radius:8px;width:90%;height:100%;margin-left:10%;padding:3% 0}.user_info .uf_main_left .uf_main_left_code .uf_main_left_code_item[data-v-71050a30]{height:50px;line-height:50px;color:#999;font-size:14px}.user_info .uf_main_left .uf_main_left_code .uf_main_left_code_item span[data-v-71050a30]:first-child{width:22%;height:100%;display:inline-block;padding-left:7%}.user_info .uf_main_left .uf_main_left_code .uf_main_left_code_item span[data-v-71050a30]:last-child{width:78%;height:100%;display:inline-block;cursor:pointer;padding-left:5%;vertical-align:middle}.user_info .uf_main_left .uf_main_left_code .uf_main_left_code_item input[data-v-71050a30]{width:70%;height:36px;padding-left:12px;font-size:16px;border:1px solid #4fdcca;border-radius:3px;color:#4fdcca}.user_info .uf_main_right[data-v-71050a30]{width:35%;float:right}",""])},2720:function(e,t,s){var o=s(1925);"string"==typeof o&&(o=[[e.id,o,""]]);s(5)(o,{});o.locals&&(e.exports=o.locals)},3213:function(e,t,s){s(2720);var o=s(1)(s(1067),s(3947),"data-v-71050a30",null);e.exports=o.exports},3947:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user_info"},[s("div",{staticClass:"uf_main_left"},[s("div",{staticClass:"uf_main_left_code"},[s("div",{staticClass:"uf_main_left_code_item"},[s("span",[e._v("姓名")]),2===e.operateType?s("input",{directives:[{name:"focus",rawName:"v-focus",value:e.flag,expression:"flag"},{name:"model",rawName:"v-model",value:e.userInfo.userName,expression:"userInfo.userName"}],ref:"inp2",staticClass:"editing",attrs:{type:"text"},domProps:{value:e.userInfo.userName},on:{blur:e.blurAndUplaod,input:function(t){t.target.composing||(e.userInfo.userName=t.target.value)}}}):s("span",{on:{click:function(t){e.toEditing(2)}}},[e._v(e._s(e.userInfo.userName))])]),e._v(" "),s("div",{staticClass:"uf_main_left_code_item"},[s("span",[e._v("性别")]),1===e.operateType?s("span",{model:{value:e.userSexTrans,callback:function(t){e.userSexTrans=t},expression:"userSexTrans"}},[s("input",{staticClass:"sex-sel",attrs:{type:"radio",name:"sex"},domProps:{checked:1===e.sexCheck},on:{click:function(t){e.manCheck()}}}),e._v("男"),s("input",{staticClass:"sex-sel",attrs:{type:"radio",name:"sex"},domProps:{checked:2===e.sexCheck},on:{click:function(t){e.womanCheck()}}}),e._v("女")]):s("span",{on:{click:function(t){e.toEditing(1)}}},[e._v(e._s(e.userSexTrans))])]),e._v(" "),s("div",{staticClass:"uf_main_left_code_item"},[s("span",[e._v("电话")]),s("span",{staticStyle:{cursor:"default"}},[e._v(e._s(e.userInfo.phone))])]),e._v(" "),s("div",{staticClass:"uf_main_left_code_item"},[s("span",[e._v("邮箱")]),3===e.operateType?s("input",{directives:[{name:"focus",rawName:"v-focus",value:e.flag,expression:"flag"},{name:"model",rawName:"v-model",value:e.userInfo.email,expression:"userInfo.email"}],ref:"inp3",staticClass:"editing",attrs:{type:"text"},domProps:{value:e.userInfo.email},on:{blur:e.blurAndUplaod,input:function(t){t.target.composing||(e.userInfo.email=t.target.value)}}}):s("span",{on:{click:function(t){e.toEditing(3)}}},[e._v(e._s(e.userInfo.email))])]),e._v(" "),s("div",{staticClass:"uf_main_left_code_item"},[s("span",[e._v("所在地")]),4===e.operateType?s("PcaSelect",{attrs:{pList:e.pList,cList:e.cList,aList:e.aList,seltP:e.seltP,seltC:e.seltC,seltA:e.seltA},on:{selectedP:e.selectedP,selectedC:e.selectedC,selectedA:e.selectedA}}):s("span",{on:{click:function(t){e.toEditing(4)}}},[e._v(e._s(e.userInfo.provinceName)+"  "+e._s(e.userInfo.cityName)+"  "+e._s(e.userInfo.areaName))])],1),e._v(" "),s("div",{staticClass:"uf_main_left_code_item"},[s("span",[e._v("详细地址")]),5===e.operateType?s("input",{directives:[{name:"focus",rawName:"v-focus",value:e.flag,expression:"flag"},{name:"model",rawName:"v-model",value:e.userInfo.address,expression:"userInfo.address"}],ref:"inp5",staticClass:"editing",attrs:{type:"text"},domProps:{value:e.userInfo.address},on:{blur:e.blurAndUplaod,input:function(t){t.target.composing||(e.userInfo.address=t.target.value)}}}):s("span",{on:{click:function(t){e.toEditing(5)}}},[e._v(e._s(e.userInfo.address))])])])]),e._v(" "),s("div",{staticClass:"uf_main_right"},[s("SelectImagePreview",{attrs:{useType:"更换头像",userInfo:e.userInfo,companyInfo:e.companyInfo},on:{up:e.uploadHandler}})],1)])},staticRenderFns:[]}}});