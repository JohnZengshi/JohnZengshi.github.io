{"title":"AngularJS中的自定义服务","slug":"AngularJS中的自定义服务","date":"2017-09-21T05:32:45.751Z","updated":"2017-09-21T11:32:29.129Z","comments":true,"excerpt":"","content":"<blockquote>\n<h2 id=\"常见的Angular内置服务：\"><a href=\"#常见的Angular内置服务：\" class=\"headerlink\" title=\"常见的Angular内置服务：\"></a>常见的Angular内置服务：</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">$log</div><div class=\"line\">$timeout</div><div class=\"line\">$interval</div><div class=\"line\">$http</div><div class=\"line\">$filter</div></pre></td></tr></table></figure>\n<h2 id=\"factory方法\"><a href=\"#factory方法\" class=\"headerlink\" title=\"factory方法\"></a>factory方法</h2></blockquote>\n<ul>\n<li><p>模块对象提供了一个factory方法. 这个方法允许我们自定义服务.</p>\n<ul>\n<li>第1个参数: 自定义服务的名称.</li>\n<li>第2个参数: 是1个数组.前面写上这个服务要依赖的别的服务,最后是1个回调函数.将需要依赖的服务通过形参注入.</li>\n<li>回到函数的返回值: 我们定义的服务是提供功能的嘛,所以要求返回1个函数或者1个对象.</li>\n</ul>\n</li>\n<li><p>具体实现：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">app.factory(<span class=\"string\">\"highven\"</span>,[<span class=\"string\">\"$filter\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$filter</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        now:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> $filter(<span class=\"string\">\"data\"</span>)(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(),<span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>)</div><div class=\"line\">        &#125;,</div><div class=\"line\">        format:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">format</span>)</span>&#123;</div><div class=\"line\">             <span class=\"keyword\">return</span> $filter(<span class=\"string\">\"date\"</span>)(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(),format)   </div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;]);</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<blockquote>\n<h2 id=\"serive方法：\"><a href=\"#serive方法：\" class=\"headerlink\" title=\"serive方法：\"></a>serive方法：</h2></blockquote>\n<ul>\n<li><p>使用模块对象的service方法也可以创建服务.</p>\n<ul>\n<li>与factory方法不同的是:<ul>\n<li>该方法不需要明确返回对象或者函数.使用this的方式为返回的对象添加属性和方法.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>具体实现：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">app.service(<span class=\"string\">\"highven\"</span>,[<span class=\"string\">\"filter\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$filter</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.now = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> $filter(<span class=\"string\">\"data\"</span>)(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(),<span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>);</div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"keyword\">this</span>.format = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">format</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> $filter(<span class=\"string\">\"data\"</span>)(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(),format)</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;]);</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<blockquote>\n<h2 id=\"调用：\"><a href=\"#调用：\" class=\"headerlink\" title=\"调用：\"></a>调用：</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">app.controller(<span class=\"string\">\"demoCtrl\"</span>,[<span class=\"string\">\"$scope\"</span>,<span class=\"string\">\"serive\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$scope,serive</span>)</span>&#123;</div><div class=\"line\">    $scope.now = serive.now();</div><div class=\"line\">&#125;])</div></pre></td></tr></table></figure>\n</blockquote>\n<ul>\n<li>注意：<ul>\n<li>service方法只能返回对象.</li>\n<li>factory可以返回对象也可以返回函数.</li>\n</ul>\n</li>\n</ul>\n","categories":[{"name":"Angular","path":"api/categories/Angular.json"}],"tags":[{"name":"方法总结","path":"api/tags/方法总结.json"}]}