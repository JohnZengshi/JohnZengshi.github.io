{"title":"云音乐案例业务逻辑(锚点值)","slug":"云音乐案例(利用锚点值)","date":"2017-09-21T12:40:43.905Z","updated":"2017-09-21T13:04:09.891Z","comments":true,"excerpt":"","content":"<blockquote>\n<h2 id=\"1-锚点值\"><a href=\"#1-锚点值\" class=\"headerlink\" title=\"1. 锚点值\"></a>1. 锚点值</h2><ul>\n<li>通过window.location.hash 可以拿到当前地址栏上的锚点值</li>\n<li>window对象有一个事件 onhashchange这个事件在url地址栏的锚点值发生变化的时候触发.</li>\n</ul>\n</blockquote>\n<ul>\n<li>案例：<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"undefined\">    header&gt;nav&gt;a&#123;</span></div><div class=\"line\"><span class=\"undefined\">        text-decoration: none;</span></div><div class=\"line\"><span class=\"undefined\">        color: #333;</span></div><div class=\"line\"><span class=\"undefined\">        font-size: 14px;</span></div><div class=\"line\"><span class=\"undefined\">        margin-left: 16px;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"undefined\">    header&gt;nav&gt;a:hover&#123;</span></div><div class=\"line\"><span class=\"undefined\">            text-decoration: underline;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">header</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">nav</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#home\"</span>&gt;</span>首页<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#my\"</span>&gt;</span>我的音乐<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#find\"</span>&gt;</span>发现音乐<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">id</span>=<span class=\"string\">\"content\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;script&gt;</div><div class=\"line\">    <span class=\"built_in\">window</span>.onhashchange = funciton()&#123;</div><div class=\"line\">        <span class=\"comment\">//1.获取url地址栏上的锚点值.</span></div><div class=\"line\">        <span class=\"keyword\">var</span> hash = <span class=\"built_in\">window</span>.location.hash.slice(<span class=\"number\">1</span>);</div><div class=\"line\">            <span class=\"comment\">// #home #my...</span></div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">//2.发送Ajax请求</span></div><div class=\"line\">        <span class=\"keyword\">var</span> url = <span class=\"string\">\"./music/\"</span>+ hash +<span class=\"string\">\".html\"</span></div><div class=\"line\">        <span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</div><div class=\"line\">        xhr.open(<span class=\"string\">\"get\"</span>,url);</div><div class=\"line\">        xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(xhr.status == <span class=\"number\">200</span>)&#123;</div><div class=\"line\">                 <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"content\"</span>).innerHTML = xhr.responseText;</div><div class=\"line\">                <span class=\"built_in\">console</span>.log(xhr.responText);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        xhr.send();</div><div class=\"line\">    &#125;</div><div class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></div></pre></td></tr></table></figure>","categories":[{"name":"开发技巧","path":"api/categories/开发技巧.json"}],"tags":[{"name":"建站技巧","path":"api/tags/建站技巧.json"}]}