{"title":"处理通用的ajax请求","slug":"利用requireJS处理通用的ajax请求","date":"2017-09-19T11:38:50.428Z","updated":"2017-09-19T08:47:35.045Z","comments":true,"excerpt":"","content":"<blockquote>\n<h2 id=\"处理通用的ajax请求\"><a href=\"#处理通用的ajax请求\" class=\"headerlink\" title=\"处理通用的ajax请求\"></a>处理通用的ajax请求</h2></blockquote>\n<ul>\n<li><p>定义模块：</p>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">define([</div><div class=\"line\">    <span class=\"string\">\"jquery\"</span>,</div><div class=\"line\"></div><div class=\"line\">],<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> obj = &#123;</div><div class=\"line\">        ajax:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">url,data,type,callback</span>)</span>&#123;</div><div class=\"line\">            $.ajax(&#123;</div><div class=\"line\">                url:url,</div><div class=\"line\">                data:data,</div><div class=\"line\">                type:type,</div><div class=\"line\">                success:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>)</span>&#123;</div><div class=\"line\">                    <span class=\"keyword\">if</span>(res.code!=<span class=\"number\">200</span>) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(res.msg);</div><div class=\"line\">                    callback(res);</div><div class=\"line\">                &#125;</div><div class=\"line\"></div><div class=\"line\">            &#125;)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> way = [<span class=\"string\">\"get\"</span>,<span class=\"string\">\"post\"</span>];</div><div class=\"line\"></div><div class=\"line\">    way.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">v</span>)</span>&#123;</div><div class=\"line\">        obj[v] = funciton(url,data,callback)&#123;</div><div class=\"line\">            <span class=\"keyword\">this</span>.ajax(url,data,v,callback);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> obj;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></li>\n</ul>\n","categories":[{"name":"RequireJS","path":"api/categories/RequireJS.json"}],"tags":[{"name":"开发技巧","path":"api/tags/开发技巧.json"}]}