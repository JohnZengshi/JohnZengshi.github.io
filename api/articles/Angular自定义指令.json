{"title":"Angular自定义属性","slug":"Angular自定义指令","date":"2017-09-19T11:38:50.433Z","updated":"2017-09-19T12:17:33.444Z","comments":true,"excerpt":"","content":"<blockquote>\n<h2 id=\"Angular自定义属性\"><a href=\"#Angular自定义属性\" class=\"headerlink\" title=\"Angular自定义属性\"></a>Angular自定义属性</h2></blockquote>\n<ul>\n<li><p>模块对象提供了一个方法: directive </p>\n<ul>\n<li>功能: 自定义指令.</li>\n<li>参数1: 自定义指令的名称</li>\n<li>参数2: 是1个回调函数.这个回调函数在解析指令的时候会执行,报错的原因是因为回调函数没有按照规范写.<ul>\n<li>这个回调函数要求返回1个对象.</li>\n<li>自定义的指令要做的事情通过这个对象的键值对来指定.</li>\n<li>restrict:  指定自定义指令的类型.  <figure class=\"highlight js\"><div class=\"mdui-table-fluid\"><table class=\"mdui-table mdui-table-hoverable \"><tr><td class=\"code\"><pre><div class=\"line\">E Element 标签.</div><div class=\"line\">A Attr    属性</div><div class=\"line\">C Class  类</div><div class=\"line\">M mark 注释</div></pre></td></tr></table></div></figure>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>注意: 如果自定义指令的名称是按照驼峰命名的 那么在使用的时候要拆开写.</p>\n  <figure class=\"highlight js\"><div class=\"mdui-table-fluid\"><table class=\"mdui-table mdui-table-hoverable \"><tr><td class=\"code\"><pre><div class=\"line\">hmTag   hm-tag</div></pre></td></tr></table></div></figure>\n</li>\n<li><p>例子：</p>\n  <figure class=\"highlight html\"><div class=\"mdui-table-fluid\"><table class=\"mdui-table mdui-table-hoverable \"><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">ng-app</span>=<span class=\"string\">\"hmApp\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">ng-controller</span>=<span class=\"string\">\"hmCtrl\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">hm-tag</span>=<span class=\"string\">\"jack\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">hm-tag</span>=<span class=\"string\">\"rose\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">hm-tag</span>=<span class=\"string\">\"tudo\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> app = angular.module(<span class=\"string\">\"hmApp\"</span>,[]);</span></div><div class=\"line\"><span class=\"javascript\">    app.controller(<span class=\"string\">\"hmCtrl\"</span>,[<span class=\"string\">\"$scope\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$scope</span>)</span>&#123;</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"undefined\">    &#125;]);</span></div><div class=\"line\"><span class=\"javascript\">    app.directive(<span class=\"string\">\"hmTag\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">return</span> &#123;</span></div><div class=\"line\"><span class=\"javascript\">            restrict:<span class=\"string\">\"EA\"</span>,</span></div><div class=\"line\"><span class=\"javascript\">            template:<span class=\"string\">\"...\"</span>,</span></div><div class=\"line\"><span class=\"javascript\">            replace:<span class=\"literal\">true</span>,</span></div><div class=\"line\"><span class=\"javascript\">            link:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">scope,element,attrs</span>)</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">                element.on(<span class=\"string\">\"click\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></div><div class=\"line\"><span class=\"undefined\">                    alert(attrs.hmTag)</span></div><div class=\"line\"><span class=\"undefined\">                &#125;)</span></div><div class=\"line\"><span class=\"undefined\">            &#125;;</span></div><div class=\"line\"><span class=\"undefined\">        &#125;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;)</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></div></figure>\n</li>\n<li><p>注意：link是一个函数：</p>\n<ul>\n<li>scope: 不管</li>\n<li>element: 代表被设定了指令的元素，直接被ng封装为一个jqlite对象</li>\n<li>attrs: 可以拿到被设定指令的元素的所有属性和属性值</li>\n<li>如果发现某个元素这定了属性值就回去执行这个指令的函数</li>\n</ul>\n</li>\n</ul>\n","categories":[{"name":"Angular","path":"api/categories/Angular.json"}],"tags":[{"name":"开发技巧","path":"api/tags/开发技巧.json"}]}